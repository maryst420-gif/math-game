<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÙˆÙ„ Ø¶Ø±Ø¨</title>

<style>
body{background:#eef2ff;transition:0.5s;font-family:tahoma;text-align:center;}
#gameBox{max-width:440px;margin:auto;padding:20px;background:#fff;border-radius:22px;box-shadow:0 14px 35px rgba(0,0,0,.2);transition:0.5s;}

.bigInput{width:70%;padding:16px;font-size:18px;border-radius:12px;margin:8px 0;box-sizing:border-box;}
.input-wrapper{position:relative;width:70%;margin:8px auto;}
.input-wrapper .bigInput{width:100%;padding-right:52px;}

.logo-link{position:absolute;right:6px;top:50%;transform:translateY(-50%);height:100%;display:flex;align-items:center;}
.logo-link img{height:65%;animation:seesaw 1.8s ease-in-out infinite;transform-origin:center bottom;}
@keyframes seesaw{0%{transform:rotate(-10deg)}50%{transform:rotate(10deg)}100%{transform:rotate(-10deg)}}

.row{display:flex;gap:10px;margin:10px 0;}
.card{flex:1;padding:14px;border-radius:14px;background:#e3e9ff;font-weight:bold;cursor:pointer;transition:.3s;font-size:16px;}
.card.active{background:#5c6bc0;color:#fff;}

#timerBox{padding:16px;background:#ffe082;font-size:22px;cursor:pointer;margin:12px 0;display:flex;align-items:center;justify-content:center;gap:10px;border-radius:50px;}
.timerIcon{width:50px;height:50px;background:#ffc107;display:flex;align-items:center;justify-content:center;border-radius:50%;}

#question{font-size:36px;font-weight:bold;color:#3f51b5;margin:14px 0;}
#shape{font-size:20px;line-height:1.8}

.answerRow{display:flex;gap:8px;justify-content:center;}
#submitBtn{flex:1;background:linear-gradient(135deg,#3949ab,#1e88e5);color:#fff;font-size:18px;border:none;border-radius:14px;height:56px;font-weight:bold;}
.answerRow input{flex:2;height:56px;font-size:20px;}

#score{font-size:20px;margin-top:10px}
#okSpan{color:#2e7d32;font-weight:bold}
#badSpan{color:#c62828;font-weight:bold}
#feedback{font-size:24px;font-weight:bold;margin-top:10px}

/* Ù…Ù‡Ø± */
.stamp{
position:fixed;inset:0;background:rgba(0,0,0,.55);
display:flex;align-items:center;justify-content:center;z-index:9999;
}
.stampBox{
padding:28px 36px;border-radius:22px;
transform:rotate(-8deg);
text-align:center;color:#000;
}
.stampBox button{
margin-top:14px;padding:10px 28px;
font-size:18px;border:none;border-radius:14px;cursor:pointer;
}
.great{background:linear-gradient(135deg,#2e7d32,#81c784)}
.verygood{background:linear-gradient(135deg,#558b2f,#aed581)}
.good{background:linear-gradient(135deg,#f9a825,#fff59d)}
.ok{background:linear-gradient(135deg,#ef6c00,#ffcc80)}
.trymore{background:linear-gradient(135deg,#c62828,#ef9a9a)}
</style>
</head>

<body>
<div id="gameBox">

<h2>ğŸ¯ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÙˆÙ„ Ø¶Ø±Ø¨</h2>

<div class="input-wrapper">
<input id="studentName" class="bigInput" placeholder="ğŸ‘¤ Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²">
<a href="https://mizedanesh.blogfa.com/" target="_blank" class="logo-link">
<img src="https://s6.uupload.ir/files/logos1_f7lj.png">
</a>
</div>

<div class="row">
<div class="card active" onclick="setMode('test',this)">ğŸ“ Ø¢Ø²Ù…ÙˆÙ†</div>
<div class="card" onclick="setMode('practice',this)">ğŸ§  ØªÙ…Ø±ÛŒÙ†ÛŒ</div>
</div>

<div class="row">
<div class="card active" onclick="setLevel(this)">ğŸŒ± Ø¢Ø³Ø§Ù†</div>
<div class="card" onclick="setLevel(this)">âš¡ Ù…ØªÙˆØ³Ø·</div>
<div class="card" onclick="setLevel(this)">ğŸ”¥ Ø³Ø®Øª</div>
</div>

<div id="timerBox" onclick="startGame()">
<div class="timerIcon">â±</div> Ø´Ø±ÙˆØ¹
</div>

<div id="question"></div>
<div id="shape"></div>

<div class="answerRow">
<input type="number" id="answer" class="bigInput" placeholder="Ø¬ÙˆØ§Ø¨ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³"
onkeydown="if(event.key==='Enter')checkAnswer()">
<button id="submitBtn" onclick="checkAnswer()">Ø«Ø¨Øª Ø¬ÙˆØ§Ø¨</button>
</div>

<div class="row">
<div class="card" onclick="window.print()">ğŸ–¨ Ú†Ø§Ù¾</div>
<div class="card" onclick="window.print()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡</div>
</div>

<div id="score">
âœ… <span id="okSpan">0</span> | âŒ <span id="badSpan">0</span>
</div>

<div id="feedback"></div>
</div>

<script>
let mode="test",level="Ø¢Ø³Ø§Ù†";
let a,b,correct,count=0;
let ok=0,bad=0,time=10,timer=null;
let nameSaved=false;

const okSpan=document.getElementById("okSpan");
const badSpan=document.getElementById("badSpan");
const studentName=document.getElementById("studentName");

const soundOk=new Audio("https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3");
const soundBad=new Audio("https://assets.mixkit.co/active_storage/sfx/950/950-preview.mp3");

function changeBackground(){
const colors=["#e3f2fd","#ffe0b2","#dcedc8","#ffccbc","#f3e5f5","#fff9c4"];
document.body.style.background=colors[Math.floor(Math.random()*colors.length)];
}

function updateScore(){okSpan.innerText=ok;badSpan.innerText=bad;}

function setMode(m,el){
mode=m;
el.parentNode.querySelectorAll('.card').forEach(c=>c.classList.remove('active'));
el.classList.add('active');
}

function setLevel(el){
el.parentNode.querySelectorAll('.card').forEach(c=>c.classList.remove('active'));
el.classList.add('active');
level=el.innerText;
}

function getRange(){
if(level.includes("Ø¢Ø³Ø§Ù†"))return[1,5];
if(level.includes("Ù…ØªÙˆØ³Ø·"))return[2,7];
return[3,10];
}

function startGame(){
if(!nameSaved){
if(studentName.value.trim()===""){
feedback.innerText="âœ‹ Ø§Ø¨ØªØ¯Ø§ Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†";
return;
}
nameSaved=true;
}
count=0;ok=0;bad=0;
updateScore();
newQuestion();
}

function newQuestion(){
changeBackground();
clearInterval(timer);
count++;
if(count>10){showStamp();return;}
answer.value="";
feedback.innerText="";
let[min,max]=getRange();
a=Math.floor(Math.random()*(max-min+1))+min;
b=Math.floor(Math.random()*(max-min+1))+min;
correct=a*b;
question.innerText=`${a} Ã— ${b}`;
shape.innerHTML="";
if(mode==="practice"){
for(let i=0;i<a;i++)shape.innerHTML+="â— ".repeat(b)+"<br>";
}else startTimer();
}

function startTimer(){
time=10;
timerBox.innerHTML='<div class="timerIcon">â±</div>'+time;
timer=setInterval(()=>{
time--;
timerBox.innerHTML='<div class="timerIcon">â±</div>'+time;
if(time<=0){
clearInterval(timer);
bad++;soundBad.play();
updateScore();
feedback.innerText="Ø§Ø´ØªØ¨Ø§Ù‡ âœ–";
checkEnd();
}
},1000);
}

function checkAnswer(){
clearInterval(timer);
if(Number(answer.value)===correct){
ok++;soundOk.play();
feedback.innerText="Ø¯Ø±Ø³Øª âœ”";
}else{
bad++;soundBad.play();
feedback.innerText="Ø§Ø´ØªØ¨Ø§Ù‡ âœ–";
}
updateScore();
checkEnd();
}

function checkEnd(){
if(count>=10){showStamp();return;}
setTimeout(newQuestion,600);
}

function showStamp(){
let text="",cls="";
if(bad===0){text="Â«Ø¹Ø§Ù„ÛŒÂ»";cls="great";}
else if(bad===1){text="Â«Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨Â»";cls="verygood";}
else if(bad===2){text="Â«Ø®ÙˆØ¨Â»";cls="good";}
else if(bad===3){text="Â«Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„Â»";cls="ok";}
else{text="Â«Ø¨ÛŒØ´ØªØ± ØªÙ…Ø±ÛŒÙ† Ú©Ù†Â»";cls="trymore";}

const s=document.createElement("div");
s.className="stamp";
s.innerHTML=`
<div class="stampBox ${cls}">
<div style="font-size:34px;font-weight:bold">${text}</div>
<div style="font-size:22px;margin-top:6px">Â«ÛŒØ§ÙˆØ±Ø²Ø§Ø¯Ù‡Â»</div>
<button onclick="restart()">Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡</button>
</div>`;
document.body.appendChild(s);
}

function restart(){
document.querySelector(".stamp").remove();
startGame();
}
</script>
</body>
</html>

